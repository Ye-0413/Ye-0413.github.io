{{ $page := .page }}
{{ $block := .block }}

{{ $widget_args := dict }}
{{ $widget_args = merge $widget_args (dict "page" $page "block" $block) }}

<div class="comments-section">
  {{ with $block.content.title }}
    <h2 class="text-2xl font-bold mb-4">{{ . }}</h2>
  {{ end }}
  
  {{ if .Site.Params.features.comments.enable }}
    {{ if eq .Site.Params.features.comments.provider "giscus" }}
      <script src="https://giscus.app/client.js"
              data-repo="{{ .Site.Params.features.comments.giscus.repo }}"
              data-repo-id="{{ .Site.Params.features.comments.giscus.repo_id }}"
              data-category="{{ .Site.Params.features.comments.giscus.category }}"
              data-category-id="{{ .Site.Params.features.comments.giscus.category_id }}"
              data-mapping="{{ .Site.Params.features.comments.giscus.mapping }}"
              data-strict="{{ .Site.Params.features.comments.giscus.strict }}"
              data-reactions-enabled="{{ .Site.Params.features.comments.giscus.reactions_enabled }}"
              data-emit-metadata="{{ .Site.Params.features.comments.giscus.emit_metadata }}"
              data-input-position="{{ .Site.Params.features.comments.giscus.input_position }}"
              data-theme="{{ .Site.Params.features.comments.giscus.theme }}"
              data-lang="{{ .Site.Params.features.comments.giscus.lang }}"
              crossorigin="anonymous"
              async>
      </script>
    {{ end }}
  {{ end }}
</div> 